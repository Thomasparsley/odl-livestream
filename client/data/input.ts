import { CategorySlug, Team, TeamsByCategory } from "../types";

const rawData = [
  {
    id: 3,
    points: 0,
    season_id: 2023,
    team_unit_id: 71,
    category: "starsi-zaci",
    group: "b",
    team_id: 3,
    name: "Bílovice",
    slug: "bilovice",
    district: "pv",
    allPoints: [0],
    best_time: 13.54,
  },
  {
    id: 97,
    points: 0,
    season_id: 2023,
    team_unit_id: 51,
    category: "starsi-zaci",
    group: "a",
    team_id: 97,
    name: "Želeč",
    slug: "zelec",
    district: "pv",
    allPoints: [0],
    best_time: 14.24,
  },
  {
    id: 110,
    points: 9,
    season_id: 2023,
    team_unit_id: 80,
    category: "starsi-zaci",
    group: "c",
    team_id: 110,
    name: "Soběsuky",
    slug: "sobesuky",
    district: "pv",
    allPoints: [1, 1, 1, 1, 1, 4],
    best_time: 16.67,
  },
  {
    id: 41,
    points: 12,
    season_id: 2023,
    team_unit_id: 670,
    category: "starsi-zaci",
    group: "a",
    team_id: 41,
    name: "Krumsín",
    slug: "krumsin",
    district: "pv",
    allPoints: [1, 0, 8, 1, 1, 1],
    best_time: 14.91,
  },
  {
    id: 479,
    points: 41,
    season_id: 2023,
    team_unit_id: 101,
    category: "starsi-zaci",
    group: "a",
    team_id: 479,
    name: "Senetářov",
    slug: "senetarov",
    district: "bk",
    allPoints: [1, 12, 0, 12, 15, 1],
    best_time: 12.53,
  },
  {
    id: 72,
    points: 0,
    season_id: 2023,
    team_unit_id: 679,
    category: "starsi-zaci",
    group: "b",
    team_id: 72,
    name: "Rozstání",
    slug: "rozstani",
    district: "pv",
    allPoints: [0, 0, 0, 0],
    best_time: 15.78,
  },
  {
    id: 88,
    points: 0,
    season_id: 2023,
    team_unit_id: 114,
    category: "dorostenci",
    group: "a",
    team_id: 88,
    name: "Vícov",
    slug: "vicov",
    district: "pv",
    allPoints: [0, 0, 0, 0],
    best_time: 13.77,
  },
  {
    id: 782,
    points: 0,
    season_id: 2023,
    team_unit_id: 663,
    category: "mladsi-zaci",
    group: "a",
    team_id: 782,
    name: "Seč",
    slug: "sec",
    district: "pv",
    allPoints: [0],
    best_time: 28.16,
  },
  {
    id: 20,
    points: 10,
    season_id: 2023,
    team_unit_id: 112,
    category: "starsi-zaci",
    group: "a",
    team_id: 20,
    name: "Drahany",
    slug: "drahany",
    district: "pv",
    allPoints: [2, 1, 5, 1, 1],
    best_time: 15.8,
  },
  {
    id: 98,
    points: 51,
    season_id: 2023,
    team_unit_id: 22,
    category: "starsi-zaci",
    group: "a",
    team_id: 98,
    name: "Krasice",
    slug: "krasice",
    district: "pv",
    allPoints: [8, 7, 1, 8, 12, 15],
    best_time: 12.79,
  },
  {
    id: 69,
    points: 0,
    season_id: 2023,
    team_unit_id: 65,
    category: "mladsi-zaci",
    group: "a",
    team_id: 69,
    name: "Ptení",
    slug: "pteni",
    district: "pv",
    allPoints: [0, 0],
    best_time: 19.66,
  },
  {
    id: 73,
    points: 0,
    season_id: 2023,
    team_unit_id: 124,
    category: "mladsi-zaci",
    group: "a",
    team_id: 73,
    name: "Seloutky",
    slug: "seloutky",
    district: "pv",
    allPoints: [0],
    best_time: 23.46,
  },
  {
    id: 41,
    points: 71,
    season_id: 2023,
    team_unit_id: 638,
    category: "mladsi-zaci",
    group: "b",
    team_id: 41,
    name: "Krumsín",
    slug: "krumsin",
    district: "pv",
    allPoints: [2, 15, 12, 15, 15, 12],
    best_time: 13.68,
  },
  {
    id: 22,
    points: 0,
    season_id: 2023,
    team_unit_id: 149,
    category: "starsi-zaci",
    group: "a",
    team_id: 22,
    name: "Dřevnovice",
    slug: "drevnovice",
    district: "pv",
    allPoints: [0],
    best_time: 23.75,
  },
  {
    id: 59,
    points: 0,
    season_id: 2023,
    team_unit_id: 674,
    category: "mladsi-zaci",
    group: "b",
    team_id: 59,
    name: "Otinoves",
    slug: "otinoves",
    district: "pv",
    allPoints: [0],
    best_time: 24.49,
  },
  {
    id: 110,
    points: 20,
    season_id: 2023,
    team_unit_id: 103,
    category: "dorostenci",
    group: "a",
    team_id: 110,
    name: "Soběsuky",
    slug: "sobesuky",
    district: "pv",
    allPoints: [1, 1, 1, 6, 5, 6],
    best_time: 12.4,
  },
  {
    id: 61,
    points: 7,
    season_id: 2023,
    team_unit_id: 42,
    category: "mladsi-zaci",
    group: "a",
    team_id: 61,
    name: "Pěnčín",
    slug: "pencin",
    district: "pv",
    allPoints: [1, 5, 1],
    best_time: 16.04,
  },
  {
    id: 104,
    points: 23,
    season_id: 2023,
    team_unit_id: 121,
    category: "starsi-zaci",
    group: "b",
    team_id: 104,
    name: "Hrochov",
    slug: "hrochov",
    district: "pv",
    allPoints: [5, 2, 6, 3, 7],
    best_time: 15.04,
  },
  {
    id: 98,
    points: 40,
    season_id: 2023,
    team_unit_id: 82,
    category: "dorostenci",
    group: "a",
    team_id: 98,
    name: "Krasice",
    slug: "krasice",
    district: "pv",
    allPoints: [7, 7, 8, 10, 1, 7],
    best_time: 12.64,
  },
  {
    id: 72,
    points: 28,
    season_id: 2023,
    team_unit_id: 119,
    category: "mladsi-zaci",
    group: "a",
    team_id: 72,
    name: "Rozstání",
    slug: "rozstani",
    district: "pv",
    allPoints: [5, 1, 5, 8, 3, 6],
    best_time: 17.19,
  },
  {
    id: 73,
    points: 0,
    season_id: 2023,
    team_unit_id: 676,
    category: "mladsi-zaci",
    group: "b",
    team_id: 73,
    name: "Seloutky",
    slug: "seloutky",
    district: "pv",
    allPoints: [0],
    best_time: 38.63,
  },
  {
    id: 59,
    points: 0,
    season_id: 2023,
    team_unit_id: 634,
    category: "mladsi-zaci",
    group: "a",
    team_id: 59,
    name: "Otinoves",
    slug: "otinoves",
    district: "pv",
    allPoints: [0],
    best_time: 25.58,
  },
  {
    id: 72,
    points: 43,
    season_id: 2023,
    team_unit_id: 120,
    category: "starsi-zaci",
    group: "a",
    team_id: 72,
    name: "Rozstání",
    slug: "rozstani",
    district: "pv",
    allPoints: [15, 8, 12, 6, 1, 1],
    best_time: 13.86,
  },
  {
    id: 48,
    points: 8,
    season_id: 2023,
    team_unit_id: 26,
    category: "starsi-zaci",
    group: "a",
    team_id: 48,
    name: "Mostkovice",
    slug: "mostkovice",
    district: "pv",
    allPoints: [0, 5, 1, 1, 1],
    best_time: 12.54,
  },
  {
    id: 19,
    points: 18,
    season_id: 2023,
    team_unit_id: 48,
    category: "mladsi-zaci",
    group: "a",
    team_id: 19,
    name: "Doloplazy",
    slug: "doloplazy",
    district: "pv",
    allPoints: [3, 4, 4, 4, 3],
    best_time: 19.78,
  },
  {
    id: 88,
    points: 0,
    season_id: 2023,
    team_unit_id: 72,
    category: "starsi-zaci",
    group: "b",
    team_id: 88,
    name: "Vícov",
    slug: "vicov",
    district: "pv",
    allPoints: [0, 0, 0, 0, 0],
    best_time: 15.61,
  },
  {
    id: 73,
    points: 0,
    season_id: 2023,
    team_unit_id: 95,
    category: "starsi-zaci",
    group: "a",
    team_id: 73,
    name: "Seloutky",
    slug: "seloutky",
    district: "pv",
    allPoints: [0],
    best_time: 21.07,
  },
  {
    id: 19,
    points: 7,
    season_id: 2023,
    team_unit_id: 57,
    category: "starsi-zaci",
    group: "a",
    team_id: 19,
    name: "Doloplazy",
    slug: "doloplazy",
    district: "pv",
    allPoints: [1, 1, 2, 1, 1, 1],
    best_time: 14.79,
  },
  {
    id: 61,
    points: 10,
    season_id: 2023,
    team_unit_id: 61,
    category: "starsi-zaci",
    group: "a",
    team_id: 61,
    name: "Pěnčín",
    slug: "pencin",
    district: "pv",
    allPoints: [3, 6, 1],
    best_time: 14.99,
  },
  {
    id: 102,
    points: 40,
    season_id: 2023,
    team_unit_id: 81,
    category: "dorostenci",
    group: "a",
    team_id: 102,
    name: "Kobeřice",
    slug: "koberice",
    district: "pv",
    allPoints: [0, 6, 12, 8, 12, 2],
    best_time: 13.17,
  },
  {
    id: 98,
    points: 0,
    season_id: 2023,
    team_unit_id: 3,
    category: "mladsi-zaci",
    group: "b",
    team_id: 98,
    name: "Krasice",
    slug: "krasice",
    district: "pv",
    allPoints: [0, 0, 0, 0],
    best_time: 16.77,
  },
  {
    id: 44,
    points: 14,
    season_id: 2023,
    team_unit_id: 28,
    category: "mladsi-zaci",
    group: "a",
    team_id: 44,
    name: "Lipová",
    slug: "lipova",
    district: "pv",
    allPoints: [4, 6, 1, 1, 2],
    best_time: 17.15,
  },
  {
    id: 19,
    points: 1,
    season_id: 2023,
    team_unit_id: 677,
    category: "starsi-zaci",
    group: "b",
    team_id: 19,
    name: "Doloplazy",
    slug: "doloplazy",
    district: "pv",
    allPoints: [1],
    best_time: 30.96,
  },
  {
    id: 104,
    points: 4,
    season_id: 2023,
    team_unit_id: 5,
    category: "mladsi-zaci",
    group: "a",
    team_id: 104,
    name: "Hrochov",
    slug: "hrochov",
    district: "pv",
    allPoints: [1, 1, 1, 1],
    best_time: 18.66,
  },
  {
    id: 44,
    points: 42,
    season_id: 2023,
    team_unit_id: 635,
    category: "dorostenci",
    group: "a",
    team_id: 44,
    name: "Lipová",
    slug: "lipova",
    district: "pv",
    allPoints: [6, 1, 15, 12, 3, 5],
    best_time: 12.96,
  },
  {
    id: 52,
    points: 7,
    season_id: 2023,
    team_unit_id: 639,
    category: "dorostenci",
    group: "a",
    team_id: 52,
    name: "Niva",
    slug: "niva",
    district: "pv",
    allPoints: [1, 2, 1, 1, 1, 1],
    best_time: 15.25,
  },
  {
    id: 97,
    points: 0,
    season_id: 2023,
    team_unit_id: 74,
    category: "mladsi-zaci",
    group: "a",
    team_id: 97,
    name: "Želeč",
    slug: "zelec",
    district: "pv",
    allPoints: [0],
    best_time: 20.76,
  },
  {
    id: 48,
    points: 6,
    season_id: 2023,
    team_unit_id: 29,
    category: "mladsi-zaci",
    group: "b",
    team_id: 48,
    name: "Mostkovice",
    slug: "mostkovice",
    district: "pv",
    allPoints: [1, 2, 2, 1],
    best_time: 18.69,
  },
  {
    id: 48,
    points: 26,
    season_id: 2023,
    team_unit_id: 4,
    category: "mladsi-zaci",
    group: "a",
    team_id: 48,
    name: "Mostkovice",
    slug: "mostkovice",
    district: "pv",
    allPoints: [1, 8, 0, 7, 4, 6],
    best_time: 15.92,
  },
  {
    id: 48,
    points: 57,
    season_id: 2023,
    team_unit_id: 83,
    category: "dorostenci",
    group: "a",
    team_id: 48,
    name: "Mostkovice",
    slug: "mostkovice",
    district: "pv",
    allPoints: [12, 12, 3, 0, 15, 15],
    best_time: 12.37,
  },
  {
    id: 61,
    points: 0,
    season_id: 2023,
    team_unit_id: 63,
    category: "mladsi-zaci",
    group: "b",
    team_id: 61,
    name: "Pěnčín",
    slug: "pencin",
    district: "pv",
    allPoints: [0, 0, 0],
    best_time: 18.65,
  },
  {
    id: 99,
    points: 18,
    season_id: 2023,
    team_unit_id: 10,
    category: "mladsi-zaci",
    group: "a",
    team_id: 99,
    name: "Domamyslice",
    slug: "domamyslice",
    district: "pv",
    allPoints: [1, 6, 3, 2, 2, 4],
    best_time: 15.25,
  },
  {
    id: 7,
    points: 0,
    season_id: 2023,
    team_unit_id: 673,
    category: "mladsi-zaci",
    group: "a",
    team_id: 7,
    name: "Brodek u Konice",
    slug: "brodek-u-konice",
    district: "pv",
    allPoints: [0],
    best_time: 52.28,
  },
  {
    id: 6,
    points: 37,
    season_id: 2023,
    team_unit_id: 105,
    category: "dorostenci",
    group: "a",
    team_id: 6,
    name: "Bousín",
    slug: "bousin",
    district: "pv",
    allPoints: [8, 10, 5, 3, 1, 10],
    best_time: 12.85,
  },
  {
    id: 3,
    points: 0,
    season_id: 2023,
    team_unit_id: 6,
    category: "mladsi-zaci",
    group: "a",
    team_id: 3,
    name: "Bílovice",
    slug: "bilovice",
    district: "pv",
    allPoints: [0],
    best_time: 15.27,
  },
  {
    id: 479,
    points: 16,
    season_id: 2023,
    team_unit_id: 134,
    category: "starsi-zaci",
    group: "b",
    team_id: 479,
    name: "Senetářov",
    slug: "senetarov",
    district: "bk",
    allPoints: [4, 1, 7, 4],
    best_time: 12.7,
  },
  {
    id: 56,
    points: 16,
    season_id: 2023,
    team_unit_id: 669,
    category: "dorostenci",
    group: "a",
    team_id: 56,
    name: "Olšany u Prostějova",
    slug: "olsany-u-prostejova",
    district: "pv",
    allPoints: [4, 1, 1, 1, 8, 1],
    best_time: 13.94,
  },
  {
    id: 88,
    points: 0,
    season_id: 2023,
    team_unit_id: 14,
    category: "starsi-zaci",
    group: "a",
    team_id: 88,
    name: "Vícov",
    slug: "vicov",
    district: "pv",
    allPoints: [0, 0, 0, 0],
    best_time: 13.86,
  },
  {
    id: 99,
    points: 13,
    season_id: 2023,
    team_unit_id: 13,
    category: "starsi-zaci",
    group: "a",
    team_id: 99,
    name: "Domamyslice",
    slug: "domamyslice",
    district: "pv",
    allPoints: [3, 0, 3, 4, 1, 2],
    best_time: 12.66,
  },
  {
    id: 11,
    points: 0,
    season_id: 2023,
    team_unit_id: 662,
    category: "starsi-zaci",
    group: "a",
    team_id: 11,
    name: "Buková",
    slug: "bukova",
    district: "pv",
    allPoints: [0],
    best_time: 31.08,
  },
  {
    id: 110,
    points: 57,
    season_id: 2023,
    team_unit_id: 2,
    category: "mladsi-zaci",
    group: "a",
    team_id: 110,
    name: "Soběsuky",
    slug: "sobesuky",
    district: "pv",
    allPoints: [8, 12, 8, 10, 12, 7],
    best_time: 14.31,
  },
  {
    id: 110,
    points: 56,
    season_id: 2023,
    team_unit_id: 16,
    category: "starsi-zaci",
    group: "a",
    team_id: 110,
    name: "Soběsuky",
    slug: "sobesuky",
    district: "pv",
    allPoints: [1, 15, 15, 7, 10, 8],
    best_time: 13.51,
  },
  {
    id: 48,
    points: 51,
    season_id: 2023,
    team_unit_id: 62,
    category: "starsi-zaci",
    group: "b",
    team_id: 48,
    name: "Mostkovice",
    slug: "mostkovice",
    district: "pv",
    allPoints: [6, 10, 7, 15, 1, 12],
    best_time: 13.28,
  },
  {
    id: 3,
    points: 0,
    season_id: 2023,
    team_unit_id: 75,
    category: "mladsi-zaci",
    group: "b",
    team_id: 3,
    name: "Bílovice",
    slug: "bilovice",
    district: "pv",
    allPoints: [0],
    best_time: 17.76,
  },
  {
    id: 41,
    points: 65,
    season_id: 2023,
    team_unit_id: 126,
    category: "mladsi-zaci",
    group: "a",
    team_id: 41,
    name: "Krumsín",
    slug: "krumsin",
    district: "pv",
    allPoints: [15, 10, 15, 0, 10, 15],
    best_time: 14.1,
  },
  {
    id: 479,
    points: 1,
    season_id: 2023,
    team_unit_id: 99,
    category: "mladsi-zaci",
    group: "a",
    team_id: 479,
    name: "Senetářov",
    slug: "senetarov",
    district: "bk",
    allPoints: [1],
    best_time: 14.4,
  },
  {
    id: 110,
    points: 53,
    season_id: 2023,
    team_unit_id: 32,
    category: "starsi-zaci",
    group: "b",
    team_id: 110,
    name: "Soběsuky",
    slug: "sobesuky",
    district: "pv",
    allPoints: [12, 6, 10, 10, 5, 10],
    best_time: 13.64,
  },
  {
    id: 88,
    points: 0,
    season_id: 2023,
    team_unit_id: 7,
    category: "mladsi-zaci",
    group: "a",
    team_id: 88,
    name: "Vícov",
    slug: "vicov",
    district: "pv",
    allPoints: [0, 0, 0, 0],
    best_time: 15.57,
  },
  {
    id: 110,
    points: 28,
    season_id: 2023,
    team_unit_id: 140,
    category: "dorostenci",
    group: "b",
    team_id: 110,
    name: "Soběsuky",
    slug: "sobesuky",
    district: "pv",
    allPoints: [5, 4, 6, 5, 4, 4],
    best_time: 12.77,
  },
  {
    id: 19,
    points: 34,
    season_id: 2023,
    team_unit_id: 139,
    category: "dorostenci",
    group: "a",
    team_id: 19,
    name: "Doloplazy",
    slug: "doloplazy",
    district: "pv",
    allPoints: [3, 5, 10, 2, 6, 8],
    best_time: 13.21,
  },
  {
    id: 3,
    points: 0,
    season_id: 2023,
    team_unit_id: 78,
    category: "starsi-zaci",
    group: "a",
    team_id: 3,
    name: "Bílovice",
    slug: "bilovice",
    district: "pv",
    allPoints: [0],
    best_time: 13,
  },
  {
    id: 44,
    points: 13,
    season_id: 2023,
    team_unit_id: 24,
    category: "starsi-zaci",
    group: "a",
    team_id: 44,
    name: "Lipová",
    slug: "lipova",
    district: "pv",
    allPoints: [7, 1, 0, 2, 2, 1],
    best_time: 14.81,
  },
  {
    id: 46,
    points: 12,
    season_id: 2023,
    team_unit_id: 672,
    category: "dorostenci",
    group: "a",
    team_id: 46,
    name: "Malé Hradisko",
    slug: "male-hradisko",
    district: "pv",
    allPoints: [2, 3, 1, 4, 2, 0],
    best_time: 15.11,
  },
  {
    id: 20,
    points: 25,
    season_id: 2023,
    team_unit_id: 122,
    category: "dorostenci",
    group: "a",
    team_id: 20,
    name: "Drahany",
    slug: "drahany",
    district: "pv",
    allPoints: [1, 4, 7, 10, 3],
    best_time: 13.01,
  },
  {
    id: 11,
    points: 0,
    season_id: 2023,
    team_unit_id: 671,
    category: "mladsi-zaci",
    group: "a",
    team_id: 11,
    name: "Buková",
    slug: "bukova",
    district: "pv",
    allPoints: [0],
    best_time: 77.65,
  },
  {
    id: 69,
    points: 0,
    season_id: 2023,
    team_unit_id: 20,
    category: "starsi-zaci",
    group: "a",
    team_id: 69,
    name: "Ptení",
    slug: "pteni",
    district: "pv",
    allPoints: [0],
    best_time: 19.52,
  },
  {
    id: 102,
    points: 25,
    season_id: 2023,
    team_unit_id: 33,
    category: "starsi-zaci",
    group: "a",
    team_id: 102,
    name: "Kobeřice",
    slug: "koberice",
    district: "pv",
    allPoints: [4, 3, 4, 1, 8, 5],
    best_time: 12.58,
  },
  {
    id: 98,
    points: 49,
    season_id: 2023,
    team_unit_id: 1,
    category: "mladsi-zaci",
    group: "a",
    team_id: 98,
    name: "Krasice",
    slug: "krasice",
    district: "pv",
    allPoints: [10, 7, 6, 10, 6, 10],
    best_time: 15.02,
  },
  {
    id: 99,
    points: 53,
    season_id: 2023,
    team_unit_id: 106,
    category: "dorostenci",
    group: "a",
    team_id: 99,
    name: "Domamyslice",
    slug: "domamyslice",
    district: "pv",
    allPoints: [15, 8, 7, 15, 7, 1],
    best_time: 12.71,
  },
  {
    id: 104,
    points: 26,
    season_id: 2023,
    team_unit_id: 110,
    category: "starsi-zaci",
    group: "a",
    team_id: 104,
    name: "Hrochov",
    slug: "hrochov",
    district: "pv",
    allPoints: [10, 1, 5, 4, 6],
    best_time: 14.89,
  },
  {
    id: 6,
    points: 44,
    season_id: 2023,
    team_unit_id: 129,
    category: "mladsi-zaci",
    group: "a",
    team_id: 6,
    name: "Bousín",
    slug: "bousin",
    district: "pv",
    allPoints: [12, 5, 7, 12, 7, 1],
    best_time: 15.45,
  },
  {
    id: 102,
    points: 30,
    season_id: 2023,
    team_unit_id: 27,
    category: "mladsi-zaci",
    group: "a",
    team_id: 102,
    name: "Kobeřice",
    slug: "koberice",
    district: "pv",
    allPoints: [7, 1, 1, 5, 8, 8],
    best_time: 15.61,
  },
  {
    id: 20,
    points: 41,
    season_id: 2023,
    team_unit_id: 143,
    category: "dorostenci",
    group: "b",
    team_id: 20,
    name: "Drahany",
    slug: "drahany",
    district: "pv",
    allPoints: [10, 15, 2, 1, 1, 12],
    best_time: 12.58,
  },
  {
    id: 110,
    points: 15,
    season_id: 2023,
    team_unit_id: 8,
    category: "mladsi-zaci",
    group: "b",
    team_id: 110,
    name: "Soběsuky",
    slug: "sobesuky",
    district: "pv",
    allPoints: [6, 3, 1, 3, 1, 1],
    best_time: 15.19,
  },
];

function processData() {
  const groupedByCategories: TeamsByCategory = {
    dorostenci: [],
    "starsi-zaci": [],
    "mladsi-zaci": [],
  };

  for (const rawTeam of rawData) {
    // count each value
    const countedValues = {} as Record<number, number>;
    for (const value of rawTeam.allPoints) {
      if (countedValues[value]) {
        countedValues[value]++;
      } else {
        countedValues[value] = 1;
      }
    }

    const bestTimeInMs = Math.floor(rawTeam.best_time * 1000);

    const team: Team = {
      teamId: rawTeam.team_id,
      teamUnitId: rawTeam.team_unit_id,
      name: rawTeam.name,
      slug: rawTeam.slug,
      group: rawTeam.group,
      district: rawTeam.district,
      sumOfPoints: rawTeam.allPoints.reduce((a, b) => a + b, 0),
      points: rawTeam.allPoints,
      countedValues: countedValues,
      bestTime: bestTimeInMs,
      positionInSeason: 0,
      timeFromEvent: {
        left: 0,
        right: 0,
      },
    };

    groupedByCategories[rawTeam.category as CategorySlug].push(team);
  }

  /* order each category */
  for (const key of Object.keys(groupedByCategories)) {
    const category = groupedByCategories[key as CategorySlug];

    category.sort((a, b) => {
      if (a.sumOfPoints > b.sumOfPoints) {
        return -1;
      } else if (a.sumOfPoints < b.sumOfPoints) {
        return 1;
      }

      // if points are equal, compare countedValues
      const aKeys = Object.keys(a.countedValues);
      const bKeys = Object.keys(b.countedValues);
      const minLength = Math.min(aKeys.length, bKeys.length);
      for (let i = 0; i < minLength; i++) {
        const aKey = aKeys[i];
        const bKey = bKeys[i];

        const aCount = a.countedValues[parseInt(aKey)];
        const bCount = b.countedValues[parseInt(bKey)];

        if (aCount > bCount) {
          return -1;
        } else if (aCount < bCount) {
          return 1;
        }
      }

      // if countedValues are equal, compare bestTime
      if (a.bestTime < b.bestTime) {
        return -1;
      } else if (a.bestTime > b.bestTime) {
        return 1;
      }

      return 0;
    });

    // set positionInSeason
    for (let i = 0; i < category.length; i++) {
      category[i].positionInSeason = i + 1;
    }

    groupedByCategories[key as CategorySlug] = category;
  }

  return groupedByCategories;
}

export const TeamData = processData();
